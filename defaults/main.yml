---
# defaults file for ansible-netbox
netbox_app_path: "{{ netbox_home + '/netbox/netbox' }}"
netbox_db_host: localhost
netbox_db_password: netbox
netbox_db_user: netbox
netbox_db: netbox

netbox_debian_pre_reqs:
  - build-essential
  - graphviz
  - libffi-dev
  - libpq-dev
  - libssl-dev
  - libxml2-dev
  - libxslt1-dev
  - nginx
  - python3
  - python3-dev
  - python3-pip
  - python3-venv
  - redis-server
  - supervisor
  - zlib1g-dev

netbox_group: netbox
netbox_home: "{{ netbox_install_dir + '/netbox' }}"
netbox_install_dir: /opt

# Expose Prometheus monitoring metrics at the HTTP endpoint '/metrics'
netbox_metrics_enabled: false

netbox_pri_domain: vagrant.local

# Redis configurations
netbox_redis_host: localhost
netbox_redis_password: ""
netbox_redis_port: 6379

netbox_secret_key: U-7xmCcYFBovnLf#)NT1yJjrZhD*qP_zt$bA=si65MeI^92Gdl

netbox_superuser_password: netbox
netbox_superuser_username: netbox
netbox_superuser_email: "netbox@{{ netbox_pri_domain }}"

# https://github.com/lae/ansible-role-netbox/blob/master/vars/main.yml
netbox_superuser_script: |
  from django.contrib.auth.models import User
  from base64 import b64decode
  password = b64decode("{{ netbox_superuser_password | b64encode }}").decode("UTF-8")
  query = User.objects.filter(username="{{ netbox_superuser_username }}")
  if not query.exists():
    User.objects.create_superuser("{{ netbox_superuser_username }}", "{{ netbox_superuser_email }}", password)
    print("changed")
  else:
    user = User.objects.get(username="{{ netbox_superuser_username }}")
    if not user.is_superuser or user.email != "{{ netbox_superuser_email }}" or not user.check_password(password):
      user.is_superuser = True
      user.is_staff = True
      user.email = "{{ netbox_superuser_email }}"
      user.set_password(password)
      user.save()
      print("changed")

netbox_user: netbox
netbox_version: 2.6.2
netbox_virtualenv: "{{ netbox_home + '/venv' }}"

### Everything below is based on custom module(s)
# Define your user token
netbox_token: null

# Define url for NetBox API
netbox_url: http://127.0.0.1:8080

# Define regions
netbox_regions:
  []
  # - name: US
  #   state: present
  # - name: East
  #   parent: US
  #   state: present
  # - name: North Virginia
  #   parent: East
  #   state: present
  # - name: Ohio
  #   parent: East
  #   state: present

# Define sites
netbox_sites:
  []
  # - asn: 65001
  #   comments: ""
  #   contact_email: johndoe@example.org
  #   contact_name: John Doe
  #   contact_phone: 111-111-1111
  #   custom_fields: {}
  #   description: ""
  #   facility: AT&T
  #   # latitude: null
  #   # longitude: null
  #   name: ATT
  #   physical_address: ""
  #   region: East
  #   shipping_address: ""
  #   state: present
  #   status: Active
  #   tags: ["ATT", "Customer1"]
  #   tenant: Customer1
  #   time_zone: US/Eastern
  # - asn: 65002
  #   comments: ""
  #   contact_email: janedoe@example.org
  #   contact_name: Jane Doe
  #   contact_phone: 222-222-2222
  #   custom_fields: {}
  #   description: ""
  #   facility: QTS
  #   # latitude: null
  #   # longitude: null
  #   name: QTS
  #   physical_address: ""
  #   region: East
  #   shipping_address: ""
  #   state: present
  #   status: Retired
  #   tags: ["QTS", "Customer2"]
  #   tenant: Customer2
  #   time_zone: US/Eastern

# Define tags
netbox_tags:
  []
  # - name: Monitored
  #   color: 4caf50
  #   state: present
  #   comments: Monitored Tag
  # - name: Not Monitored
  #   color: aa1409
  #   state: present
  #   comments: Not Monitored Tag

# Define tenant groups
netbox_tenant_groups:
  []
  # - name: Acquisitions
  #   state: present
  # - name: Customers
  #   state: present

# Define tenants
netbox_tenants:
  []
  # - name: Acquisition1
  #   group: Acquisitions
  #   state: present
  #   description: Acquisition 1 Tenant
  #   comments: Acquisition 1 Tenant
  #   tags:
  #     - Not Monitored
  # - name: Customer1
  #   group: Customers
  #   state: present
  #   description: Customer 1 Tenant
  #   comments: Customer 1 Tenant
  #   tags:
  #     - Monitored
  # - name: Customer2
  #   group: Customers
  #   state: present
  #   description: Customer 2 Tenant
  #   comments: Customer 2 Tenant
  #   tags:
  #     - Monitored

# Define IPAM roles
netbox_ipam_roles:
  []
  # - name: Production
  #   state: present
  #   weight: 1000
  # - name: Development
  #   state: present
  #   weight: 1000
  # - name: UAT
  #   state: present
  #   weight: 1000

# Define VLAN groups
netbox_vlan_groups:
  []
  # - name: ATT-VLAN-GROUP
  #   site: ATT
  #   state: present
  # - name: QTS-VLAN-GROUP
  #   site: QTS
  #   state: present
  # - name: TEST-VLAN-GROUP
  #   # site: null
  #   state: present

# Define vrfs
netbox_vrfs:
  []
  # - custom_fields: {}
  #   description: Customer1 VRF
  #   enforce_unique: true
  #   name: Customer1 VRF
  #   rd: Customer1-rd
  #   state: present
  #   tags:
  #     - Customer1
  #   tenant: Customer1
  # - custom_fields: {}
  #   description: Customer2 VRF
  #   enforce_unique: true
  #   name: Customer2 VRF
  #   rd: Customer2-rd
  #   state: present
  #   tags:
  #     - Customer2
  #   tenant: Customer2
